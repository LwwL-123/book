# Golang 面试题总结



# 1. new和make是什么，有什么区别

在Go语言中，`make`和`new`都是用于分配相应类型的内存空间，那么他们有什么区别呢



## 基本特性

### make

在Go语言中，内置函数make仅支持`slice`,`map`,`	channel`三种数据类型的内存创建，**其返回值是所创建类型的本身，而不是新的指针引用**

```go
func main(){
  v1 := make([]int 1,5) //长度为1 最大容量为5
  v2 := make(map[int]bool,5)
  v3 := make(chan int,1)
  
  fmt.Println(v1,v2,v3)
}

// [0] 
// map[] 
// 0xc000052070
```

在上面的代码中，分别用make函数分别对三种数据类型进行初始化。

你会发现有的入参是有多个长度指定，有的没有。主要区别是len和cap的指定，有的类型没有容量的说法。



### new

在Go语言中，内置函数new可以对类型进行内存创建和初始化。**其返回值是所创建类型的指针引用**

new在日常工程代码中比较少见，因为他可以被T{}替代



## 区别在哪里

new函数也可以初始化make的三种类型

```go
v1 := new(chan bool)
v2 := new(map[string]struct{})
```

那`make`函数的区别和优势是什么呢：

​	本质上在于make函数在初始化时，会初始化slice，chan，map类型的内部数据结构，new不会

例如：在map类型中，合理的len和cap可以提高效率，减少开销



## 总结

- `make`:
  - 能够**分配并初始化**类型所需要的内存空间和结构，返回**引用类型本身**
  - 仅支持`slice`,`map`,`channel`三种类型
  - 具有独特的优势，make函数会对三种类型的内部数据结构(长度，容量等)赋值

- `new`:
  - 能够**分配**类型所需的内存空间，返回**指针引用(指向内存的指针)**
  - 可被替代，能够通过字面值快速初始化